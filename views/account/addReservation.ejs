<% layout('../templates/layoutAccount')%>





<script type="text/javascript" src="https:////cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.11.2/js/bootstrap-select.min.js"></script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.5.0-rc.2/angular-resource.js"></script>
<script type="text/javascript" src="/angular_app/angular_account_app.js"></script>
<div ng-app="myApp" ng-controller="APPController1">

<div class="row" ng-cloak >
    <!--
    <div class="content-float">


        <div class="block">

            <div class="block-title">
                <div class="block-options pull-right">

                </div>
                <h2> <strong>  Add reservation  </strong></h2>
            </div>

            <form action="/account/addReservation" method="post" class="form-horizontal form-bordered"  id="register">

                <div class="form-group">
                    <div class="col-md-12">
                        <div class="input-group">
                            <input type="text" id="type_room" name="type_room" class="form-control " placeholder="Booking type" required>
                            <span class="input-group-addon"><i class="fa  fa-star"></i></span>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-md-12">
                        <div class="input-group">
                            <input type="text" id="option_room" name="option_room" class="form-control " placeholder="Room option " required>
                            <span class="input-group-addon"><i class=" fa fa-camera "></i></span>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label class=" col-md-1 control-label">From</label>
                    <div class="col-md-2 col-md-offset-2">
                        <input id="start_date" name="start_date" class="form-control input-datepicker" data-date-format="mm-dd-yyyy" placeholder="dd-mm-yyyy" type="text">


                </div>
                    <label class=" col-md-2 control-label">To</label>
                    <div class="col-md-2 col-md-offset-1">
                        <input id="end_date" name="end_date" class="form-control input-datepicker" data-date-format="mm-dd-yyyy" placeholder="dd-mm-yyyy" type="text">
                    </div>

                    </div>

                <div class="form-group">
                    <label class="col-md-6 control-label" for="example-multiple-select">Available rooms</label>
                    <div class="col-md-12">
                        <select id="room_id" name="room_id" class="form-control" size="5" multiple="">
                            <option disabled> Room type| Room description  | Bed_number </option>
                            <option ng-repeat="room in roomList" value="{{room.id}}" ng-if="room.reservationId == null"> {{room.type}} | {{room.description}}  | {{room.bed_number}} </option>

                        </select>
                    </div>
                </div>



                <div class="form-group ">
                    <div class="col-md-12">
                        <button type="submit" class="btn  btn-info pull-right">Submit</button>
                    </div>
                </div>

            </form>

        </div>-->



<div id="hotelList">
    <div class="col-lg-4" ng-repeat="list in hotels">
        <!-- Edit Contact Block -->
        <div class="block">
            <!-- Edit Contact Title -->
            <div class="block-title">
                <div class="block-options pull-right">

                </div>
                <h2><i class="fa fa-ticket"></i> Hotel {{list.name}}</h2>
            </div>
            <!-- END Edit Contact Title -->

            <!-- Edit Contact Content -->
            <form action="" method="post" class="form-horizontal form-bordered" onsubmit="return false;">

                <div class="form-group">
                    <label class="col-xs-3 control-label" for="edit-contact-name">description</label>
                    <div class="col-xs-9">
                        <input id="edit-contact-name" name="edit-contact-name" class="form-control" value="{{list.description}}" placeholder="" type="text">
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-xs-3 control-label" for="edit-contact-email">location</label>
                    <div class="col-xs-9">
                        <input id="edit-contact-email" name="edit-contact-email" class="form-control" value="{{list.location}}" placeholder="" type="text">
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-xs-3 control-label" for="edit-contact-phone">Capacity</label>
                    <div class="col-xs-9">
                        <input id="edit-contact-phone" name="edit-contact-phone" class="form-control" value="{{list.capacity}}" placeholder="" type="text">
                    </div>
                </div>

                <input type="text" id="latitude" value="{{list.latitude}}" hidden>
                <input type="text" id="longitude" value="{{list.longitude}}" hidden>



                <div class="form-group">

                    <div class="col-sm-12" >
                        <button type="submit" class="btn btn-sm btn-primary" ng-click="showMap(list.latitude,list.longitude)"><i class="fa fa-thumb-tack"></i> Show Map</button>
                        <button type="submit" class="btn btn-sm btn-warning" ng-click="showOffers(list.id,list)" ><i class="fa fa-info-circle"></i> Book Now</button>


                    </div>
                </div>

            </form>
            <!-- END Edit Contact Content -->
        </div>


    </div>
</div>


<div id="reservation" hidden="true">
    <div class="content-float">


        <div class="block">

            <div class="block-title">
                <div class="block-options pull-right">

                </div>
                <h2> <strong> Book In  {{hotel.name }} :  </strong></h2>
            </div>

            <form action="/account/addReservation" method="post" class="form-horizontal form-bordered"  id="register">

                        <input type="text" id="hotelId" name="hotelId" value="{{hotel.id}}" hidden>

                <div class="form-group">
                    <div class="col-md-12">
                        <div><select id="type_room" name="type_room" class="form-control" size="1">
                                <option >Please select room type</option>
                                <option ng-repeat="roomType in typeList" value="{{roomType.type}}" > {{roomType.type}} </option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-md-12">
                        <div class="input-group">
                            <input type="number" id="room_nb" name="room_nb" class="form-control " placeholder="Number Room to book" required>
                            <span class="input-group-addon"><i class="fa  fa-star"></i></span>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-md-12">
                        <div>
                            <select class="js-example-basic-multiple "  multiple="multiple" id="option_room"  name="option_room"  style="width: 100%" >

                                    <option     ng-repeat="option in optionList"   value="{{option.description}}">{{option.description}}</option>



                            </select>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label class=" col-md-1 control-label">From</label>
                    <div class="col-md-2 col-md-offset-2">
                        <input id="start_date" name="start_date" class="form-control input-datepicker" data-date-format="mm-dd-yyyy" placeholder="dd-mm-yyyy" type="text">


                    </div>
                    <label class=" col-md-2 control-label">To</label>
                    <div class="col-md-2 col-md-offset-1">
                        <input id="end_date" name="end_date" class="form-control input-datepicker" data-date-format="mm-dd-yyyy" placeholder="dd-mm-yyyy" type="text">
                    </div>

                </div>


                <div class="form-group ">
                    <div class="col-md-12">

                        <button type="submit" class="btn  btn-warning pull-right">Submit</button>
                        <input  class="btn btn-primary pull-right" id="" name="button" class="form-control pull-right" value="return to hotel list" placeholder="" type="button"  ng-click="return()"  >
                    </div>
                </div>

            </form>

        </div>


</div>
    <div class="block">
        <!-- Table Styles Title -->
        <div class="block-title">
            <h2><strong>Reservation</strong> </h2>
        </div>
        <!-- END Table Styles Title -->

        <!-- Table Styles Content -->
        <!-- Changing classes functionality initialized in js/pages/tablesGeneral.js -->

        <div class="table-responsive">
            <!--
            Available Table Classes:
                'table'             - basic table
                'table-bordered'    - table with full borders
                'table-borderless'  - table with no borders
                'table-striped'     - striped table
                'table-condensed'   - table with smaller top and bottom cell padding
                'table-hover'       - rows highlighted on mouse hover
                'table-vcenter'     - middle align content vertically
            -->
            <table id="general-table" class="table table-striped table-vcenter table-bordered" >
                <thead>
                <tr>


                    <th>Room Type</th>
                    <th>Options</th>
                    <th>Capacity</th>
                    <th style="width: 150px;" class="text-center">Actions</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="room in roomList">
                    <td style="width: 350px"><h4 href="" class="text-center" ng-repeat="roomType in typeList"  ng-if="roomType.id == room.roomTypeId">{{roomType.type}}</h4>

                        <div ng-repeat="roomType in typeList"  ng-if="roomType.id == room.roomTypeId">

                            <img ng-src="{{room.picture_url}}"  alt="image"  height="142px" width="99%" >
                        </div>


                    </td>
                    <td class="text-center"style="width: 20%"><h2 style="margin-left: 2px" class="label label-info" ng-repeat="roomOption in allRoomOption" ng-if="roomOption.roomId == room.id"><i  ng-repeat="option in optionList" ng-if="option.id ==roomOption.optionId">  {{option.description }}  </i></h2></td>
                    <td class="text-center" style="width: 20%"><a href="javascript:void(0)" class="label  label-info">{{room.bed_number }}  <i class="fa fa-user ">  </i></a></td>
                    <td class="text-center">
                        <div class="btn-group btn-group-xs">
                            <a href="javascript:void(0)" data-toggle="tooltip" title="Book" class="btn btn-default" data-original-title="Edit"><i class="">Book</i></a>

                        </div>
                    </td>
                </tr>

                </tbody>
                <tfoot>

                </tfoot>
            </table>
        </div>
        <!-- END Table Styles Content -->
    </div>
</div>


    <div  id="modal" class="modal" hidden="true">



        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Hotel Location</h4>
                </div>
                <div class="modal-body">
                    <div id="map" name="map"  class="gmap" style="height: 350px; position: relative; overflow: hidden;">

                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>

        </div>
    </div>

    </div>
</div>
<script async defer
        src="http://maps.google.com/maps/api/js?key=AIzaSyDzqhn4QZDsH_IvRDxaCfUDBUnko8RbeYQ">
</script>
<script>
    function initMap(latitude,longitude) {


        if(latitude != undefined){
            var uluru = {lat:latitude, lng:longitude};
            console.log('*********************')
            console.log(uluru)
            var map = new google.maps.Map(document.getElementById('map'), {
                zoom: 4,
                center: uluru
            });
            var marker = new google.maps.Marker({
                position: uluru,

                map: map
            });

        }


    }

</script>

<script type="text/javascript">
    $(".js-example-basic-multiple").select2({
        placeholder: "Select options ",
        allowClear: true
    });

</script>
